# å¿«é€Ÿä¸Šæ‰‹

ç”±äº .npmrc ä¸­è¦è®¾ç½® _authTokenï¼Œç”¨äºå…å¯† publishï¼Œè€Œ _authToken ä¿¡æ¯æ¯”è¾ƒç§å¯†ï¼Œå°±ä¸é€‚åˆå†™æ­»æ”¾åœ¨ .npmrc ä¸­ï¼Œå¯ä»¥ç”¨ç¯å¢ƒå˜é‡æ›¿ä»£ã€‚

è¿™é‡Œè¦è€ƒè™‘ 2 ç§æƒ…å†µï¼Œä¸€ä¸ªæ˜¯æœ¬åœ°åŒ–å‘å¸ƒï¼Œä¸€ä¸ªæ˜¯åœ¨ CI/CD ä¸­å‘å¸ƒã€‚

é¦–å…ˆè¯´åé¢ä¸€ç§æƒ…å†µï¼Œåœ¨ CI/CD ä¸­å‘å¸ƒ npm åŒ…å·²ç»æœ‰æ¯”è¾ƒæ ‡å‡†çš„æ–¹æ¡ˆäº†ï¼Œå¤§éƒ¨åˆ† CI/CD å¹³å°éƒ½æ”¯æŒåœ¨ workflow ä¸­æŒ‡å®šç¯å¢ƒå˜é‡ï¼Œå¹¶ä¸”æ”¯æŒåŠ å¯†ï¼Œæ²¡æœ‰æš´éœ² token çš„é£é™©ã€‚npm ä¹Ÿæœ‰ç›¸å…³çš„é…ç½®æ–‡æ¡£ï¼Œè§[Set the token as an environment variable on the CI/CD server](https://docs.npmjs.com/using-private-packages-in-a-ci-cd-workflow#set-the-token-as-an-environment-variable-on-the-cicd-server)ã€‚

å…³é”®é…ç½®å¦‚ä¸‹ï¼š

```
steps:
  - run: |
      npm install
  - env:
      NPM_TOKEN: ${{ secrets.NPM_TOKEN }}
```

é‚£ä¹ˆå…³é”®è¿˜æ˜¯åœ¨äºå‰é¢é‚£ç§æƒ…å†µï¼Œæœ‰æ—¶å€™éœ€è¦åœ¨æœ¬åœ°å‘å¸ƒï¼Œæ­¤æ—¶åº”è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿæˆ‘å°è¯•æ·»åŠ ç³»ç»Ÿç¯å¢ƒå˜é‡ä¹Ÿæ²¡æœ‰æˆåŠŸï¼Œè¿˜å°è¯•äº†`dotenv`ï¼Œä¸è¿‡ä¹Ÿä¸å¤ªæ–¹ä¾¿ï¼Œåªè¦`.npmrc`ä¸­å­˜åœ¨å˜é‡ï¼Œåªè¦è·‘ä»»ä½•`npm scripts`ï¼Œéƒ½ä¼šå»å¯»æ‰¾`${NPM_TOKEN}`ã€‚æˆ‘ä»¬ä¸å¯èƒ½ç»™æ‰€æœ‰è„šæœ¬éƒ½åŠ ä¸Š`dotenv`ã€‚

æ‰€ä»¥å¦‚æœè¦åœ¨æœ¬åœ°å‘å¸ƒï¼Œä¸€ä¸ªæ›¿ä»£æ–¹æ³•æ˜¯ä¸´æ—¶æ‰‹åŠ¨å°†`.npmrc`çš„ token å†™æ­»ï¼Œæ”¹æˆï¼š

```
//registry.npmjs.org/:_authToken=npm_xxxxxxxxxxxxxxxxxx
```

ä½†æ˜¯ lerna publish çš„æ—¶å€™åˆéœ€è¦ä¸€ä¸ªå¹²å‡€çš„ git çŠ¶æ€ï¼Œå¦‚æœæœ‰ modified files ä¹Ÿä¸è¡Œï¼ˆå› ä¸ºæ”¹äº† .npmrc å°±ä¸å¹²å‡€äº†ï¼‰ã€‚å•Šï¼ŒçœŸéš¾ã€‚æœ€ç†æƒ³çš„åŠæ³•è¿˜æ˜¯æŠŠç¯å¢ƒå˜é‡ç»™æå®šï¼ŒåŒæ—¶åˆä¸èƒ½æ”¹å¤ªå¤šè„šæœ¬ã€‚

æœ€åå‘ç°åŠ ç³»ç»Ÿç¯å¢ƒå˜é‡æ˜¯æœ‰ç”¨çš„ï¼Œå…³é”®æ˜¯æ”¹äº†åè¦é‡æ–° VSCodeï¼Œæœç„¶è¿˜å¾—æ˜¯é‡å¯å¤§æ³•ã€‚

# ä¸‹é¢æ˜¯ä¸“æ ç›¸å…³æ–‡ç« å…¥å£

> æœ¬æ–‡ä¸ºç¨€åœŸæ˜é‡‘æŠ€æœ¯ç¤¾åŒºé¦–å‘ç­¾çº¦æ–‡ç« ï¼Œ14å¤©å†…ç¦æ­¢è½¬è½½ï¼Œ14å¤©åæœªè·æˆæƒç¦æ­¢è½¬è½½ï¼Œä¾µæƒå¿…ç©¶ï¼
> 
> ä¸“æ ä¸‹ç¯‡æ–‡ç« ä¼ é€é—¨ï¼š[ç»„ä»¶åº“æŠ€æœ¯é€‰å‹å’Œå¼€å‘ç¯å¢ƒæ­å»º](https://juejin.cn/post/7153432538046791687)

# ä¸“æ ä»‹ç»

å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ [Tusi](https://juejin.cn/user/2752832847753085)ï¼Œæœ€è¿‘åœ¨å†™ **åŸºäºViteæ‰“é€ ä¸šåŠ¡ç»„ä»¶åº“** ç›¸å…³ä¸“æ ï¼Œæ¬¢è¿è¯»è€…ä»¬å…³æ³¨ [æˆ‘çš„ä¸“æ ](https://juejin.cn/column/7140103979697963045) ä¸€èµ·äº¤æµå­¦ä¹ ã€‚

æˆ‘çš„ä¸“æ èšç„¦äºå¦‚ä½•æ­å»ºä¸€ä¸ª **ä¸šåŠ¡ç»„ä»¶åº“**ï¼Œå¹¶ä¸ä¼šè®²è¿°æ€ä¹ˆä» 0 åˆ° 1 æ­å»ºä¸€ä¸ªç±»ä¼¼äº **AntDesign** æˆ–è€… **ElementPlus** è¿™æ ·çš„åŸºç¡€ç»„ä»¶åº“ï¼Œå› ä¸ºå„ä¸ªç¤¾åŒºä¸­è¿™æ ·çš„è¯¾ç¨‹æˆ–è€…ä¸“æ ä¹Ÿä¸å°‘ï¼Œå¤§å®¶ä»è¿™äº›ä¸“æ ä¸­å¯ä»¥æ›´è¯¦ç»†åœ°äº†è§£æ€ä¹ˆé€ ä¸€äº›åŸºç¡€ç»„ä»¶ï¼Œè¿›è€ŒæŒæ¡å»ºè®¾ç»„ä»¶åº“çš„æ–¹æ³•ã€‚

åŒæ—¶ä¹Ÿæ˜¯å› ä¸ºæˆ‘è®¤ä¸º **æ²¡å¿…è¦é‡å¤é€ åŸºç¡€è½®å­**ï¼Œåœ¨æˆ‘çœ‹æ¥ï¼Œä½ å¾ˆéš¾åšå‡ºä¸€ä¸ª`Button`ç»„ä»¶ï¼Œå®ƒä¼šæ¯” AntDesign çš„`Button`ç»„ä»¶çš„è®¾è®¡æ›´å®Œç¾ã€æ›´å¥½ç”¨ï¼Œè¿™å¹¶ä¸æ˜¯æ„å‘³ç€ä¸å¯èƒ½åšåˆ°ï¼Œåªæ˜¯è¿™ç§æŠ•å…¥è·Ÿæœ€åäº§å‡ºçš„ä»·å€¼æ˜¯ä¸æ˜¯èƒ½åŒ¹é…ï¼Œç”¨åœˆå†…çš„è¯æœ¯è¯´å°±æ˜¯ï¼Œâ€œä½ åšçš„äº‹æƒ…ï¼Œä»–çš„ä»·å€¼ç‚¹åœ¨å“ªé‡Œï¼Ÿä½ æ˜¯å¦åšå‡ºäº†å£å’ï¼Œå½¢æˆäº†æ ¸å¿ƒç«äº‰åŠ›ï¼Ÿä½ åšçš„äº‹æƒ…ï¼Œå’Œ AntDesign å›¢é˜Ÿçš„å·®å¼‚åŒ–åœ¨å“ªé‡Œï¼Ÿâ€

> ğŸ¶ç‹—å¤´ä¿å‘½

æ²¡é”™ï¼Œç«™åœ¨å…¬å¸æˆ–è€…å›¢é˜Ÿè§’åº¦ï¼ŒLeader é‡ç‚¹å…³å¿ƒä½ åšçš„ä¸œè¥¿æ˜¯ä¸æ˜¯çœŸçš„å¯¹ä¸šåŠ¡äº§ç”Ÿäº†ä»·å€¼ã€‚å½“ç„¶ï¼Œè¿™æ˜¯æˆ‘ç«™åœ¨ä¸ªäººå†² KPI/OKR çš„è§’åº¦æ¥æ€è€ƒè¿™ä¸ªäº‹æƒ…çš„ï¼Œè¿™ç§é€ é‡å¤æ€§åŸºç¡€è½®å­çš„äº§å‡ºï¼ŒåŸºæœ¬ä¸Šå¾ˆéš¾å¾—åˆ° Leader çš„è®¤å¯ï¼Œå¯¹ Leader æ¥è¯´ï¼Œä»–æƒ³çš„å¾ˆå¯èƒ½æ˜¯ï¼Œâ€œä½ ä¸ºä»€ä¹ˆä¸ç›´æ¥ç”¨ AntDesign / Lodash / Dayjs ç­‰ç­‰å‘¢ï¼Ÿä¸ºä»€ä¹ˆè¦åšä¸ªå·®ä¸å¤šçš„ä¸œè¥¿ï¼Œä½†æ˜¯è´¨é‡è¿˜æ²¡åˆ«äººé«˜ï¼Ÿâ€

**æ¢ä¸ªè§’åº¦**ï¼Œå…¶å®å¯¹ä¸ªäººæ¥è¯´ï¼Œä»å¤´åˆ°å°¾æä¸€æ¬¡åŸºç¡€è®¾æ–½å»ºè®¾ï¼Œæ˜¯ä¼šæœ‰å¾ˆå¤§æå‡å’Œæ”¶è·çš„ã€‚å¦‚æœä½ æƒ³è¦æ·±å…¥æŸä¸ªé¢†åŸŸï¼Œä¸ **å½»åº•é’»è¿›å»ä¸€æ¢ç©¶ç«Ÿ** æ˜¯å¾ˆéš¾å‘ç°é‚£äº›å¼€æ‹“è€…åœ¨è½åœ°çš„è¿‡ç¨‹ä¸­éƒ½é‡åˆ°äº†ä»€ä¹ˆå›°éš¾ï¼ˆè¸©äº†ä»€ä¹ˆå‘ï¼‰ä»¥åŠè§£å†³è¿™äº›éš¾ç‚¹éƒ½èµ°äº†ä»€ä¹ˆæ ·çš„è·¯å­ï¼ˆä¹Ÿå°±æ˜¯æŠ€æœ¯æ–¹æ¡ˆçš„æ¼”è¿›è·¯çº¿ï¼‰ã€‚

é‚£ä¹ˆä»€ä¹ˆæ˜¯æœ‰ä»·å€¼çš„äº§å‡ºå‘¢ï¼Ÿæˆ‘è®¤ä¸ºæœ‰è¿™ä¹ˆä¸¤ä¸ªæ–¹å‘å€¼å¾—æˆ‘ä»¬æ¢ç´¢ã€‚

- ç¬¬ä¸€ï¼Œè¿˜æ˜¯é€ è½®å­ï¼Œ**é€ æ–°çš„å¹¶ä¸”èƒ½è½åœ°çš„è½®å­**ï¼Œæ–°è½®å­æ˜¯æœ‰ä»·å€¼çš„ï¼Œå› ä¸ºå®ƒä¸å…·å¤‡é‡å¤æ€§ï¼Œæš‚æ—¶ä¹Ÿæ²¡æœ‰æ›¿ä»£ç‰©ï¼Œç”šè‡³å®ƒçš„å‡ºç°å¯èƒ½å½±å“æŠ€æœ¯ç¤¾åŒºçš„å‘å±•ã€‚
- ç¬¬äºŒï¼Œ**åˆ›é€ é™„åŠ ä»·å€¼**ã€‚åœ¨ç°æœ‰è½®å­çš„åŸºç¡€ä¸Šï¼Œå¡‘é€ ä¸€ä¸ªæ›´å¼ºå¤§çš„å·¥å…·ã€‚æˆ‘å»ºè®®å¤§å®¶å¯ä»¥ä»ä¸€äº›é—¨æ§›æ¯”è¾ƒä½çš„æ–¹å‘å…¥æ‰‹ï¼Œæ¯”å¦‚åŸºäºç°æœ‰çš„å·¥å…·é“¾ï¼Œæ•´åˆå‡ºä¸€ä¸ªè´´è¿‘å®é™…ä¸šåŠ¡çš„ CLI / å¯è§†åŒ–å·¥å…·ï¼Œç”¨äºæå‡å¼€å‘æ•ˆç‡ï¼›æˆ–è€…å¦‚æœ¬ä¸“æ ä¸»é¢˜ä¸€èˆ¬ï¼ŒåŸºäºå·²æœ‰çš„ä¸‰æ–¹åŸºç¡€ç»„ä»¶åº“æ‰“é€ ä¸€ä¸ªæœåŠ¡äºä¸šåŠ¡å¼€å‘çš„ä¸“ç”¨ç»„ä»¶åº“ã€‚

å›åˆ°æ­£é¢˜ï¼Œæ—¢ç„¶æœ¬ä¸“æ è®²çš„å†…å®¹ä¸æ˜¯ä» 0 åˆ° 1 æ­å»ºåŸºç¡€ç»„ä»¶åº“ï¼Œé‚£æ˜¯ä¸æ˜¯æ„å‘³ç€å­¦ä¹ ä¸“æ è¿‡åå¹¶ä¸èƒ½æŒæ¡æ­å»ºä¸€ä¸ªç±»ä¼¼ AntDesign è¿™æ ·å¤§è€Œå…¨çš„ç»„ä»¶åº“çš„æ ¸å¿ƒæ–¹æ³•å‘¢ï¼Ÿ

**ç­”æ¡ˆæ˜¾ç„¶æ˜¯å¦å®šçš„**ã€‚ç»„ä»¶åº“çš„æ­å»ºç†å¿µéƒ½æ˜¯ç±»ä¼¼çš„ï¼Œæ˜¯æ®Šé€”åŒå½’çš„ï¼Œæœ€ç»ˆä»è¾“å‡ºçš„äº§ç‰©å½¢å¼ä¸Šçœ‹éƒ½æ˜¯è¦æ»¡è¶³è¯¸å¦‚ **æŒ‰éœ€åŠ è½½**ã€**å…¼å®¹å„ä¸ªæ¨¡å—è§„èŒƒ**ã€**Typescriptç±»å‹æ”¯æŒ**ã€**Unplugin** è¿™ç±»çš„æ ¸å¿ƒè¯‰æ±‚ï¼Œè€Œç»„ä»¶çš„å†…å®¹ä¸°å¯Œåº¦æ˜¯å…¶æ¬¡è€ƒè™‘çš„ï¼Œæä¾›`Button`, `Icon`, `Table`, `Form` è¿™äº›ç»„ä»¶ä¸å¦ï¼Œéƒ½ä¸å½±å“è¿™ä¸ªç»„ä»¶åº“çš„æ ¸å¿ƒæ¶æ„ï¼Œå³ä¾¿ä½ åç»­æƒ³è¦è‡ªè¡Œå®ç°è¿™äº›åŸºç¡€ç»„ä»¶ï¼Œéšæ—¶éƒ½å¯ä»¥å¼€å§‹ã€‚

æœ€åï¼Œåœ¨æˆ‘çœ‹æ¥ï¼Œä¸€ä¸ªé‡‡çº³äº†ä¸šåŠ¡ç»„ä»¶åº“çš„åº”ç”¨ï¼Œå®ƒçš„æ•´ä½“æ¶æ„å¯èƒ½ä¼šå‘ˆç°å‡ºè¿™æ ·ä¸€ç§å½¢æ€ï¼šåšé‡‡ä¼—é•¿ï¼Œæå‡æ•ˆç‡çš„åŒæ—¶ä¹Ÿä¸ä¼šæŸç¼šä½å¼€å‘è€…çš„æ‰‹è„šï¼Œä¸ä¼šé™åˆ¶å¼€å‘è€…å±€é™äºä½¿ç”¨æŸä¸€ä¸ªç‰¹å®šçš„ UI æ¡†æ¶ï¼Œè¿™åœ¨æŒ‰éœ€åŠ è½½çš„æ”¯æŒä¸‹æ˜¯å¯è¡Œçš„ã€‚

![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a86cd5ccb6ad4ea3babda2bd3ed09d79~tplv-k3u1fbpfcp-watermark.image?)

åœ¨æœ¬ä¸“æ ä¸­ï¼Œæˆ‘ä¼šåŸºäºè‡ªå·±åœ¨å¤šä¸ªé¡¹ç›®ä¸­æ‘¸ç´¢æ€»ç»“å¾—åˆ°çš„å®æˆ˜ç»éªŒï¼Œå¸¦ç€è¯»è€…ä¸€èµ·æ¢ç´¢ç»„ä»¶åº“ä»è®¾è®¡åˆ°å¼€å‘ï¼Œå†åˆ°è‡ªåŠ¨åŒ–å‘å¸ƒçš„å…¨é“¾è·¯æµæ°´çº¿ã€‚æœ¬ä¸“æ å¤§è‡´ä¼šå›´ç»• **è®¾è®¡æ€è·¯**ã€**ç»„ä»¶å¼€å‘å®æˆ˜**ã€**æ„å»ºæ‰“åŒ…æµç¨‹**ã€**å‘å¸ƒæµç¨‹**ï¼Œ**æ–‡æ¡£å»ºè®¾**ç­‰æ–¹é¢å…¥æ‰‹ä»‹ç»ï¼ŒæŠŠç»„ä»¶åº“ç ”å‘é“¾è·¯çš„ä¸€äº›**å…³é”®èŠ‚ç‚¹**è®²æ¸…æ¥šï¼Œ**å¸®åŠ©è¯»è€…æŒæ¡åŸºäº Vite æ„å»ºç°ä»£ç»„ä»¶åº“çš„æ ¸å¿ƒæ–¹æ³•**ã€‚

# å‰è¨€

**UIç»„ä»¶åº“** å¯¹å‰ç«¯å·¥ç¨‹å¸ˆè€Œè¨€ï¼Œæ—©å·²ä¸æ˜¯ä¸€ä¸ªé™Œç”Ÿçš„æ¦‚å¿µï¼ŒBootStrap, Material, AntDesign, Element, Vant, iViewï¼Œä»¥åŠæœ€è¿‘æŸäº›å¤§å‚å¼€æºå‡ºæ¥çš„ AcroDesign, TDesign, Semi Design ç­‰ï¼Œè¿™äº›åè¯å¯¹æˆ‘ä»¬æ¥è¯´éƒ½åº”è¯¥ä¸ç®—é™Œç”Ÿï¼Œç”šè‡³å¯ä»¥è¯´æ—¥å¸¸å·¥ä½œä¸­æˆ‘ä»¬éƒ½è‡³å°‘éœ€è¦ä¸å…¶ä¸­çš„ä¸€å‘˜æ‰“äº¤é“ï¼ˆå¤§ä½¬ç•¥è¿‡ï¼‰ã€‚çœ‹å¤šäº†ç»„ä»¶åº“ï¼Œè‡ªå·±åŠ¨æ‰‹å†™ä¸€ä¸¤ä¸ªå°ç»„ä»¶è‡ªç„¶ä¹Ÿä¸æ˜¯ä»€ä¹ˆéš¾äº‹ï¼Œæ¯«ä¸å¤¸å¼ åœ°è¯´ï¼Œ**95%ä»¥ä¸Š**çš„å‰ç«¯å·¥ç¨‹å¸ˆéƒ½æ•¢æ‹ç€è‡ªå·±çš„èƒ¸è„¯è¯´ï¼šâ€œæˆ‘ä¼šå¼€å‘ç»„ä»¶ï¼â€

æˆ‘ä»¬è®¤åŒç»„ä»¶å¼€å‘ç®€å•æ˜“ä¸Šæ‰‹ï¼Œä½†åŒæ—¶ä¹Ÿä¸å¾—ä¸æ‰¿è®¤è¿™ä¸€åˆ‡éƒ½å»ºç«‹åœ¨ä¸æ–­ç¹è£å‘å±•çš„å‰ç«¯æ¡†æ¶å’Œå·¥å…·é“¾ç”Ÿæ€åœˆä¹‹ä¸Šï¼

ä¼´éšç€ **å‰ç«¯æ¡†æ¶**ã€**æ„å»ºå·¥å…·**ã€**UI/UXè®¾è®¡ç†å¿µ** çš„æ›´æ–°æ¢ä»£ï¼ŒUIç»„ä»¶åº“çš„å‘å±•ä¹Ÿæ˜¯æ—¥æ–°æœˆå¼‚ï¼ç¡®å®ï¼Œåœ¨ç°ä»£å‰ç«¯æ¡†æ¶çš„åŠ æŒä¸‹ï¼Œå¼€å‘ä¸€ä¸ªç»„ä»¶çš„é—¨æ§›å¾ˆä½ï¼Œå¼€å‘è€…åªéœ€è¦ä½¿ç”¨æ¡†æ¶æä¾›çš„ **å£°æ˜å¼** è¯­æ³•ï¼Œçº¦å®šå¥½ **è¾“å…¥** å’Œ **è¾“å‡º**ï¼Œå°†ç»„ä»¶å†…éƒ¨ **é€»è¾‘** ç»„ç»‡å¥½ï¼Œä¸€ä¸ªç»„ä»¶å°±æœ‰äº†é›å½¢ã€‚


![çˆ¶å­ç»„ä»¶æ¨¡å‹.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1c688cf1c7fe41c188ac58f9f299a419~tplv-k3u1fbpfcp-watermark.image?)

ç„¶è€Œé—¨æ§›ä½ä¸ä»£è¡¨å¼€å‘ç»„ä»¶å°±å¾ˆç®€å•ï¼Œå¼€å‘ä¼˜è´¨çš„ç»„ä»¶å®é™…ä¸Šéå¸¸è€ƒéªŒå¼€å‘è€…çš„ç»¼åˆè®¾è®¡èƒ½åŠ›ã€‚

# ç»„ä»¶è®¾è®¡åŸºæœ¬åŸåˆ™

é‚£ä¹ˆå¼€å‘ä¸€ä¸ªç»„ä»¶åˆ°åº•è¦è€ƒè™‘ä»€ä¹ˆå‘¢ï¼Ÿç»“åˆæˆ‘è‡ªå·±çš„å®æˆ˜å¼€å‘ç»éªŒï¼Œæˆ‘æƒ³å¤§æ¦‚ä¼šæœ‰è¿™æ ·å‡ ä¸ªæ–¹é¢ï¼š

## æ¸…æ™°æ˜äº†çš„è¾“å…¥è¾“å‡º

è¾“å…¥è¾“å‡ºæ˜¯ç”±ç»„ä»¶æä¾›çš„åŠŸèƒ½å†³å®šçš„ï¼Œå®ƒä»¬å°±åƒæ˜¯ä¸€ä¸ªç»„ä»¶çš„ **ç”¨æˆ·ä½¿ç”¨æ‰‹å†Œ**ï¼Œå†³å®šäº†ç”¨æˆ·å¯¹ç»„ä»¶äº§å“çš„ç¬¬ä¸€å°è±¡ã€‚å¼€å‘è€…åº”è¯¥æä¾›è¯­ä¹‰åŒ–çš„ã€ç®€å•æ˜“æ‡‚çš„ APIï¼Œé™ä½ä½¿ç”¨çš„é—¨æ§›å’Œå¿ƒæ™ºè´Ÿæ‹…ï¼

## é«˜å†…èšï¼Œä½è€¦åˆ

é«˜å†…èšæ˜¾å¾—å¾ˆå¥½ç†è§£ï¼Œåœ¨ç¼–å†™ç»„ä»¶æ—¶ï¼Œæˆ‘ä»¬çš„å‡ºå‘ç‚¹éƒ½æ˜¯æŠŠé€»è¾‘èšåˆåˆ°ç»„ä»¶ä¸­ï¼ŒåŸºæœ¬ä¸Šæ˜¯ç«­å°½æ‰€èƒ½åšåˆ°å†…èšï¼Œä½†æ˜¯è¿™ä¹Ÿéå¸¸è€ƒéªŒä¸ªäººçš„é€»è¾‘æŠ½è±¡èƒ½åŠ›ã€‚

ä½è€¦åˆï¼Œåˆ™ä½“ç°åœ¨ä¸è¦ä¸å¤–éƒ¨äº§ç”Ÿå¤ªå¤šçš„è”ç³»ã€‚ç”¨å‡½æ•°æ€ç»´æ¥è¯´å°±æ˜¯ï¼šç»„ä»¶å°½å¯èƒ½æ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼Œä¸è¦å¯¹å¤–éƒ¨äº§ç”Ÿå‰¯ä½œç”¨ã€‚

å½“ä½ åœ¨æä¾›é€šç”¨ç»„ä»¶æ—¶ï¼Œåº”å½“å°½å¯èƒ½ä¸æ˜¾å¼ä¾èµ–å¤–éƒ¨çŠ¶æ€ï¼Œæ¯”å¦‚ä¾èµ– `Store`, `Context` ä¹‹ç±»çš„ App å…¨å±€çŠ¶æ€ã€‚å¦‚æœå®åœ¨æœ‰éœ€è¦ï¼Œå¯ä»¥å°è¯•é€šè¿‡ props æˆ–è€… inject ä¹‹ç±»çš„æ¸ é“æ³¨å…¥åˆ°ç»„ä»¶ä¸­ã€‚ç±»ä¼¼åœ°ï¼Œä¹Ÿä¸è¦æ˜¾å¼ä¾èµ– `Storage`, `Cookie` ä¹‹ç±»çš„æµè§ˆå™¨å­˜å‚¨ï¼Œå› ä¸ºè¿™å¾ˆå®¹æ˜“äº§ç”Ÿå†²çªï¼Œå¯¹ SSR ä¹Ÿä¸å‹å¥½ï¼Œåœ¨å¿…è¦æ—¶ï¼Œç¨å¾®é è°±çš„æ–¹æ³•æ˜¯åŠ ä¸Šå‘½åç©ºé—´ã€‚

```javascript
// bad case
const store = useStore(key)
// ä¾èµ–äº†å…¨å±€çŠ¶æ€
const innerState = computed(() => store.state.xxxModule.xxxState)
```

åŒæ—¶ï¼Œä¸è¦åœ¨ç»„ä»¶ä¸­ç ´åå¤–éƒ¨çŠ¶æ€ã€‚ä¸¾ä¸ªæ —å­ï¼Œå‡è®¾ä½ ä¸ºäº†å®ç°æŸä¸ªåŠŸèƒ½è€Œæ‰©å±•å‡ºä¸€ä¸ªåŸå‹æ–¹æ³•ï¼Œç›´æ¥æŠŠ Array æˆ–è€… Object çš„åŸå‹ç»™ä¿®æ”¹äº†ï¼Œè¿™å°±å±äºç ´åå¤–éƒ¨çŠ¶æ€äº†ï¼Œä¹Ÿå°±æ˜¯å¯¹å¤–éƒ¨äº§ç”Ÿäº† **å‰¯ä½œç”¨**ã€‚

```javascript
// bad case
// ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘å†³å®šç»™ Array åŸå‹åŠ ä¸€ä¸ªç¥å¥‡çš„æ–¹æ³•
Array.prototype.blingbling = function() {
  // balabala ä¸€å †ä»£ç 
  console.log("åæ­£å°±æ˜¯ç‰›é€¼åœ°è§£å†³äº†è¿™ä¸ªé—®é¢˜")
}
```

è¦çŸ¥é“ï¼Œè€ƒè™‘åˆ°`Object.defineProperty`æ— æ³•å¤„ç†æ•°ç»„åœºæ™¯ï¼Œå³ä¾¿ Vue2 ä¸ºäº†å®ç°æ•°ç»„çš„å“åº”å¼ç‰¹æ€§ï¼Œä¹Ÿæ²¡æœ‰ç›´æ¥ä¿®æ”¹`Array.prototype`ä¸Šçš„åŸå‹æ–¹æ³•ï¼Œè€Œæ˜¯é‡‡ç”¨äº†ä¸€ä¸ªå·§å¦™çš„æ–¹å¼å¤„ç†ï¼Œå…·ä½“å¯ä»¥çœ‹ Vue2 æºç é‡Œçš„`core/observer/index.js`ä¸­çš„ **Observer** å®ç°ä»¥åŠ`core/observer/array.js`ä¸­é’ˆå¯¹ Array çš„ç‰¹æ®Šå¤„ç†ã€‚

## å¯å®šåˆ¶ï¼Œå¯æ‰©å±•

ä¸€ä¸ªç»„ä»¶è¦æƒ³æ”¯æ’‘å¤§é‡çš„ä¸šåŠ¡åœºæ™¯ï¼Œå¿…ç„¶åº”è¯¥æ˜¯å¯å®šåˆ¶å’Œå¯æ‰©å±•çš„ã€‚æˆ‘ä»¬åœ¨å¼€å‘ä¸€ä¸ªç»„ä»¶æ—¶ï¼Œä¼šé¢„è®¾ä¸€ç§æœ€å¸¸è§çš„åœºæ™¯ï¼Œè¿™ç§é¢„è®¾ä¸€èˆ¬æ˜¯åŸºäºå¤§é‡çš„å®é™…æ¡ˆä¾‹æ€»ç»“å‡ºçš„ç»éªŒï¼Œå¤§æ¦‚æ„æ€å°±æ˜¯ï¼šå½“å¤§å®¶æƒ³åˆ°ä½¿ç”¨è¿™ä¸ªç»„ä»¶æ—¶ï¼Œå¤§éƒ¨åˆ†äººèƒ½æƒ³åˆ°çš„æ¨¡æ ·å°±æ˜¯æˆ‘é¢„è®¾çš„è¿™ä¸ªæ ·å­ï¼Œè¿™å°±è¾¾åˆ°äº†ä¸€ç§æ‹¿æ¥å³ç”¨çš„æ•ˆæœï¼Œå¤§éƒ¨åˆ†äººéƒ½åŸºæœ¬æ»¡æ„ã€‚

ä½†æ˜¯ï¼Œæ»¡è¶³äº† 80% çš„ä½¿ç”¨éœ€æ±‚ï¼Œä¹Ÿä¸ä»£è¡¨å…¨éƒ¨ï¼Œä½ å¿…é¡»è¶³å¤ŸåŒ…å®¹ã€‚ç”¨å‡½æ•°æ€ç»´æ¥çœ‹ï¼Œå°±æ˜¯ç»„ä»¶è·Ÿéšç”¨æˆ·è¾“å…¥çš„æ¡ä»¶çš„å˜åŒ–è€Œå˜åŒ–ã€‚

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dd76f5163dfb4cc89f86f8f27dffa78c~tplv-k3u1fbpfcp-watermark.image?)

åæ˜ åˆ°ç»„ä»¶ä¸Šï¼Œæœ€åŸºç¡€çš„åšæ³•æ˜¯ï¼šå¯ä»¥é€šè¿‡`Props`æ¥æ”¶ç”¨æˆ·çš„æ¡ä»¶ï¼Œç„¶ååœ¨æ¨¡æ¿æˆ–è€…é€»è¾‘ä¸­ï¼Œæ ¹æ®ç”¨æˆ·çš„æ¡ä»¶å‘ˆç°å‡ºä¸åŒçš„æ•ˆæœã€‚

ç”šè‡³ï¼Œæˆ‘ä»¬å¯ä»¥å°†éƒ¨åˆ†å†…å®¹çš„æ¸²æŸ“æƒé™å®Œå…¨äº¤ç»™ç”¨æˆ·ï¼Œåœ¨ React ä¸­ï¼Œä¸€åˆ‡çš†`Props`ï¼Œè‡ªå®šä¹‰æ¸²æŸ“ä¹Ÿåªæ˜¯é€šè¿‡`Props`ä¼ é€’è¿‡æ¥ä¸€æ®µæ¸²æŸ“å‡½æ•°ã€‚è€Œåœ¨ Vue ä¸­ï¼Œå…·ä½“çš„å®ç°å¯ä»¥åˆ†ä¸ºæ’æ§½ã€ä½œç”¨åŸŸæ’æ§½ç­‰ã€‚ä½¿ç”¨å½¢å¼å¹¶ä¸é‡è¦ï¼ŒèƒŒåçš„åŸç†éƒ½æ˜¯ç›¸é€šçš„ã€‚

## å‹å¥½çš„å‘Šè­¦æç¤º

å‘Šè­¦ä¿¡æ¯åœ¨æ¡†æ¶æºç ä¸­ä¼šå¾ˆå¸¸è§ã€‚å½“ä½ çš„ä½¿ç”¨æ–¹å¼ä¸æ¡†æ¶çš„æŒ‡å¯¼æ€§æ„è§ä¸ä¸€è‡´æ—¶ï¼Œæ¡†æ¶å†…éƒ¨å°±ä¼šé€šè¿‡ä¸€æ®µåˆ¤æ–­é€»è¾‘ç»™å‡ºä¸€äº›å‘Šè­¦ä¿¡æ¯ï¼Œæ–¹ä¾¿ä½ æ’æŸ¥é—®é¢˜å‡ºç°çš„åŸå› ã€‚

```javascript
// vueæºç ä¸­å…³äº mount ç”¨æ³•çš„å‘Šè­¦
if (__DEV__ && (rootContainer as any).__vue_app__) {
    warn(
      `There is already an app instance mounted on the host container.\n` +
        ` If you want to mount another app on the same host container,` +
        ` you need to unmount the previous app by calling \`app.unmount()\` first.`
    )
}
```

åœ¨ç»„ä»¶è®¾è®¡ä¸­ä¹Ÿå¯ä»¥é‡‡çº³è¿™ç§åšæ³•ï¼Œå¦‚æœç”¨æˆ·é”™è¯¯åœ°ä½¿ç”¨äº†ç»„ä»¶çš„æŸä¸ªå±æ€§ï¼Œç»„ä»¶å†…éƒ¨å°±åº”è¯¥ç»™å‡ºå‹å¥½çš„å‘Šè­¦æç¤ºã€‚ç«™åœ¨ TypeScript çš„è§’åº¦æ¥çœ‹ï¼Œä¹Ÿèƒ½é€šè¿‡ç±»å‹åšä¸€äº›çº¦æŸï¼Œä½†æ˜¯å¦‚æœ TypeScript çš„è¦†ç›–ç‡ä¸æ˜¯å¾ˆé«˜ï¼Œä¹Ÿå¾ˆéš¾è€ƒè™‘åˆ°æ‰€æœ‰åœºæ™¯ï¼ŒåŒæ—¶ä¹Ÿæ²¡æ³•åšåˆ°å…¼é¡¾è¿è¡Œæ—¶ï¼Œæ‰€ä»¥åœ¨ä»£ç ä¸­ç•™ä¸‹ä¸€äº›å¿…è¦çš„å‘Šè­¦æç¤ºè¿˜æ˜¯æœ‰å¿…è¦çš„ã€‚

åŒæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æ³¨æ„åˆ°ï¼Œè¿™äº›å‘Šè­¦ä¿¡æ¯éƒ½å°†ç¯å¢ƒä¿¡æ¯è€ƒè™‘åœ¨å†…ï¼Œä»…ä»…ä¼šåœ¨å¼€å‘ç¯å¢ƒä¸­å‡ºç°ã€‚åœ¨ Tree Shaking æ—¶ï¼Œè¿™äº›ä¸ä¼šæŠµè¾¾çš„æ¡ä»¶åˆ†æ”¯ä»£ç ï¼Œä¼šè¢«åˆ¤å®šä¸º Dead Code è€Œè¢«è£å‰ªæ‰ã€‚

æˆ‘ä»¬ä¹‹æ‰€ä»¥è´¹è¿™ä¹ˆå¤§åŠ²åšè¿™ç§å‘Šè­¦ä¿¡æ¯ï¼Œå°±æ˜¯ä¸ºäº†é™ä½ç”¨æˆ·ä½¿ç”¨æ—¶çš„å¿ƒæ™ºè´Ÿæ‹…ï¼Œç”¨æˆ·å¾ˆå¤§ç¨‹åº¦ä¸Šå¯ä»¥ä»å‘Šè­¦ä¿¡æ¯ä¸­æ’æŸ¥å‡ºé—®é¢˜èµ·å› ã€‚æœ‰äº†è¿™äº›å‘Šè­¦ä¿¡æ¯ï¼Œå°±ä¸ç”¨éº»çƒ¦ç”¨æˆ·é€šè¿‡ debug æºç å¾—ä»¥è§£å†³é—®é¢˜ï¼Œæ¯•ç«Ÿæ¯ä¸ªäººçš„ç²¾åŠ›éƒ½æœ‰é™ï¼Œé˜…è¯»æºç æ˜¯æœ€åçš„é€€è·¯ï¼Œéåˆ°ä¸‡ä¸å¾—å·²å°±æ²¡å¿…è¦å»è¯»æºç ã€‚

## ç»„ä»¶æ–‡æ¡£

å³ä¾¿æˆ‘ä»¬åœ¨å‰é¢åšäº†è¿™ä¹ˆå¤šåŠªåŠ›ï¼Œä¹Ÿä¸å¯èƒ½å®Œå…¨è§£å†³ç”¨æˆ·çš„ç–‘é—®å’Œç„¦è™‘ã€‚æ­¤æ—¶ï¼Œä¸€ä»½å¥å…¨çš„ä½¿ç”¨æ–‡æ¡£åˆ™æ˜¯å¯¹ç”¨æˆ·æœ€å¤§çš„å®‰æ…°ã€‚æ–‡æ¡£å»ºè®¾æœ¬èº«æ˜¯ä¸€é¡¹å·¨å¤§çš„è„æ´»ç´¯æ´»ï¼Œå¦‚ä½•é«˜æ•ˆåˆå…¨é¢åœ°æŠŠæ–‡æ¡£åšå¥½ï¼Œéå¸¸è€ƒéªŒå¼€å‘è€…çš„å·¥ç¨‹èƒ½åŠ›ã€æŠ€å·§ä»¥åŠè€å¿ƒã€‚

## å®Œå¤‡çš„TypeScriptç±»å‹æ”¯æŒ

ä¸€ä¸ªæ²¡æœ‰ç±»å‹æ”¯æŒçš„ç»„ä»¶ï¼Œç¡®å®å¾ˆéš¾ç”¨ã€‚React ç”±äºä¸ JSX ç»“åˆç´§å¯†ï¼Œæœ¬èº«å¯¹ TypeScript çš„æ”¯æŒåº¦å°±ä¸é”™ï¼Œå†ç»“åˆ IDE å†…ç½®çš„ TypeScript ç±»å‹æ¨å¯¼èƒ½åŠ›ï¼Œå³ä¾¿æˆ‘ä»¬ä¸å†™å¤ªå¤šç±»å‹å£°æ˜ï¼Œå¾—åˆ°çš„å¼€å‘ä½“éªŒä¹Ÿä¸ä¼šå¤ªå·®ã€‚

Vue åœ¨è¿™ä¸€æ–¹é¢ç›¸å¯¹å¤„äºåŠ£åŠ¿ï¼ŒSFCï¼ˆå•æ–‡ä»¶ç»„ä»¶ï¼‰æœ¬èº«å°±æ˜¯ä¸€ä¸ªæ–°çš„ DSLï¼ˆé¢†åŸŸç‰¹å®šè¯­è¨€ï¼‰ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¸ JSX ç›¸æ¯”ï¼Œå…¶ TypeScript æ”¯æŒåº¦è‡ªç„¶å¤„äºä¸‹é£ï¼Œç‰¹åˆ«åœ¨æ³›å‹ç»„ä»¶ç­‰åœºæ™¯ä¸‹æ˜¾å¾—æ›´åŠ ä¹åŠ›ã€‚ä½†æ˜¯ï¼ŒåŸºäº `@vue/compiler-sfc` å®˜æ–¹æä¾›çš„ parse å’Œ compile èƒ½åŠ›ï¼Œå†é…åˆ`tsc`æˆ–è€…`ts-morph`ä¹‹ç±»çš„å·¥å…·ï¼Œæˆ‘ä»¬ä¹Ÿèƒ½ç»™ SFC æä¾›ä¸é”™çš„ç±»å‹æ”¯æŒã€‚

## é…å¥—çš„å·¥å…·é“¾

ä¸ºäº†æ›´å¤§ç¨‹åº¦æé«˜ DXï¼ˆå¼€å‘è€…ä½“éªŒï¼‰ï¼Œç»„ä»¶å¼€å‘è€…è¿˜å¯ä»¥æ ¹æ®å®é™…æƒ…å†µæä¾›ä¸€äº›é…å¥—å·¥å…·ï¼Œç›®çš„å¯ä»¥æ˜¯æä¾›ä»£ç çš„è‡ªåŠ¨è¡¥å…¨/æ™ºèƒ½æç¤ºä¹‹ç±»çš„èƒ½åŠ›ï¼›ä¹Ÿå¯ä»¥æ˜¯æä¾›è„šæ‰‹æ¶å·¥å…·ï¼Œä»¥ä¾¿å¿«é€Ÿæ­å»ºèµ·å¼€å‘ç¯å¢ƒã€‚å½¢å¼ä¸Šï¼Œå¯ä»¥é€‰æ‹© CLIï¼Œæˆ–è€…æ˜¯ IDE æ’ä»¶ç­‰ã€‚æ€»ä¹‹åœ¨è¿™æ–¹é¢è¿˜æœ‰å¾ˆå¤§çš„æƒ³è±¡ç©ºé—´ç­‰ç€å¤§å®¶å»å‘æ˜ã€‚

# æ€»ç»“

è¿™æ˜¯ä¸€ç¯‡ Vite ä¸šåŠ¡ç»„ä»¶åº“ä¸“æ çš„å¼€ç¯‡ä»‹ç»ï¼Œæœ¬æ–‡é¦–å…ˆé˜è¿°äº†æˆ‘åœ¨åšä¸“æ é€‰é¢˜æ—¶çš„åˆè¡·ï¼Œä¹Ÿç®€è¿°äº†æœ¬ä¸“æ æ¥ä¸‹æ¥å†™ä½œçš„ä¸€äº›ç€é‡å‘åŠ›çš„æ–¹å‘ã€‚æ¥ç€æˆ‘åˆ†äº«äº†è‡ªå·±åœ¨åšç»„ä»¶å¼€å‘è¿‡ç¨‹ä¸­æ€»ç»“çš„ä¸€äº›ç»„ä»¶è®¾è®¡åŸåˆ™å’Œç»éªŒï¼Œå¸Œæœ›èƒ½ç»™è¯»è€…å¸¦æ¥ä¸€äº›å¯å‘å’Œå¸®åŠ©ï¼å¦‚æœæ‚¨å¯¹æˆ‘çš„ä¸“æ æ„Ÿå…´è¶£ï¼Œæ¬¢è¿æ‚¨[è®¢é˜…å…³æ³¨æœ¬ä¸“æ ](https://juejin.cn/column/7140103979697963045)ï¼Œæ¥ä¸‹æ¥å¯ä»¥ä¸€åŒæ¢è®¨å’Œäº¤æµç»„ä»¶åº“å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜ã€‚

> ä¸“æ ä¸‹ç¯‡æ–‡ç« ä¼ é€é—¨ï¼š[ç»„ä»¶åº“æŠ€æœ¯é€‰å‹å’Œå¼€å‘ç¯å¢ƒæ­å»º](https://juejin.cn/post/7153432538046791687)
>
> å¯åŠ æˆ‘å¥½å‹ã€[laobaife](https://qncdn.wbjiang.cn/%E5%BE%AE%E4%BF%A1%E4%BA%8C%E7%BB%B4%E7%A0%81%E5%90%8D%E7%89%87.jpg)ã€‘äº¤æµ